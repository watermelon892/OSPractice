GAS LISTING /tmp/ccAGT20F.s 			page 1


   1              	# 1 "asm_src/asmfunc.S"
   1              	    .arch i486
   1              	...
   0              	
   0              	
   1              	/* Copyright (C) 1991-2020 Free Software Foundation, Inc.
   2              	
   3              	    .text
   4              	
   5              	    // Function name included in this program
   6              	    .global io_hlt, io_cli, io_sti, io_stihlt
   7              	    .global io_in8, io_in16, io_in32
   8              	    .global io_out8, io_out16, io_out32
   9              	    .global io_load_eflags, io_store_eflags
  10              	    .global load_gdtr, load_idtr
  11              	    .global asm_inthandler21, asm_inthandler27, asm_inthandler2c
  12              	
  13              	    .extern inthandler21, inthandler27, inthandler2c
  14              	
  15              	// void _io_hlt(void)
  16              	io_hlt:
  17 0000 F4       	    hlt
  18 0001 C3       	    ret
  19              	
  20              	// void io_cli(void)
  21              	io_cli:
  22 0002 FA       	    cli
  23 0003 C3       	    ret
  24              	
  25              	// void io_sti(void)
  26              	io_sti:
  27 0004 FB       	    sti
  28 0005 C3       	    ret
  29              	
  30              	// void io_stihlt(void)
  31              	io_stihlt:
  32 0006 FB       	    sti
  33 0007 F4       	    hlt
  34 0008 C3       	    ret
  35              	
  36              	// int io_in8(int port)
  37              	io_in8:
  38 0009 8B542404 	    movl 4(%esp), %edx  // port
  39 000d B8000000 	    movl $0, %eax
  39      00
  40 0012 EC       	    inb  %dx, %al
  41 0013 C3       	    ret
  42              	
  43              	// int io_in16(int port)
  44              	io_in16:
  45 0014 8B542404 	    movl 4(%esp), %edx  // port
  46 0018 B8000000 	    movl $0, %eax
  46      00
  47 001d 66ED     	    inw  %dx, %ax
  48 001f C3       	    ret
  49              	
  50              	// int io_int32(int port)
GAS LISTING /tmp/ccAGT20F.s 			page 2


  51              	io_in32:
  52 0020 8B542404 	    movl 4(%esp), %edx  // port
  53 0024 ED       	    inl  %dx, %eax
  54 0025 C3       	    ret
  55              	
  56              	// int io_out8(int port, int data)
  57              	io_out8:
  58 0026 8B542404 	    movl 4(%esp), %edx  // port
  59 002a 8A442408 	    movb 8(%esp), %al   // data
  60 002e EE       	    outb %al, %dx
  61 002f C3       	    ret
  62              	
  63              	// int io_out16(int port, int data)
  64              	in_out16:
  65 0030 8B542404 	    movl 4(%esp), %edx  // port
  66 0034 8B442408 	    movl 8(%esp), %eax  // data
  67 0038 66EF     	    outw %ax, %dx
  68 003a C3       	    ret
  69              	
  70              	// int io_out32(int port, int data)
  71              	in_out32:
  72 003b 8B542404 	    movl 4(%esp), %edx  // port
  73 003f 8B442408 	    movl 8(%esp), %eax  // data
  74 0043 EF       	    outl %eax, %dx
  75 0044 C3       	    ret
  76              	
  77              	// int io_load_eflags(void)
  78              	io_load_eflags:
  79 0045 9C       	    pushf  // PUSH EFLAGS
  80 0046 58       	    pop %eax
  81 0047 C3       	    ret
  82              	
  83              	// int io_store_eflags(int eflags)
  84              	io_store_eflags:
  85 0048 8B442404 	    movl 4(%esp), %eax
  86 004c 50       	    push %eax
  87 004d 9D       	    popf   // POP EFLAGS
  88 004e C3       	    ret
  89              	
  90              	// void load_gdtr(int limit, int addr)
  91              	load_gdtr:
  92 004f 668B4424 	    mov  4(%esp), %ax  // limit
  92      04
  93 0054 66894424 	    mov  %ax, 6(%esp)
  93      06
  94 0059 0F015424 	    lgdt 6(%esp)
  94      06
  95 005e C3       	    ret
  96              	
  97              	// void load_idtr(int limit, int addr)
  98              	load_idtr:
  99 005f 668B4424 	    mov  4(%esp), %ax  // limit
  99      04
 100 0064 66894424 	    mov  %ax, 6(%esp)
 100      06
 101 0069 0F015C24 	    lidt 6(%esp)
 101      06
GAS LISTING /tmp/ccAGT20F.s 			page 3


 102 006e C3       	    ret
 103              	
 104              	// void asm_inthandler21(void)
 105              	asm_inthandler21:
 106 006f 06       	    push %es
 107 0070 1E       	    push %ds
 108 0071 60       	    pusha
 109 0072 89E0     	    movl %esp, %eax
 110 0074 50       	    push %eax
 111 0075 668CD0   	    movw %ss, %ax
 112 0078 8ED8     	    movw %ax, %ds
 113 007a 8EC0     	    movw %ax, %es
 114 007c E8FCFFFF 	    call inthandler21
 114      FF
 115 0081 58       	    pop  %eax
 116 0082 61       	    popa
 117 0083 1F       	    pop  %ds
 118 0084 07       	    pop  %es
 119 0085 CF       	    iret
 120              	
 121              	// void asm_inthandler27(void)
 122              	asm_inthandler27:
 123 0086 06       	    push %es
 124 0087 1E       	    push %ds
 125 0088 60       	    pusha
 126 0089 89E0     	    movl %esp, %eax
 127 008b 50       	    push %eax
 128 008c 668CD0   	    movw %ss, %ax
 129 008f 8ED8     	    movw %ax, %ds
 130 0091 8EC0     	    movw %ax, %es
 131 0093 E8FCFFFF 	    call inthandler27
 131      FF
 132 0098 58       	    pop  %eax
 133 0099 61       	    popa
 134 009a 1F       	    pop  %ds
 135 009b 07       	    pop  %es
 136 009c CF       	    iret
 137              	
 138              	// void asm_inthandler2c(void)
 139              	asm_inthandler2c:
 140 009d 06       	    push %es
 141 009e 1E       	    push %ds
 142 009f 60       	    pusha
 143 00a0 89E0     	    movl %esp, %eax
 144 00a2 50       	    push %eax
 145 00a3 668CD0   	    movw %ss, %ax
 146 00a6 8ED8     	    movw %ax, %ds
 147 00a8 8EC0     	    movw %ax, %es
 148 00aa E8FCFFFF 	    call inthandler2c
 148      FF
 149 00af 58       	    pop  %eax
 150 00b0 61       	    popa
 151 00b1 1F       	    pop  %ds
 152 00b2 07       	    pop  %es
 153 00b3 CF       	    iret
GAS LISTING /tmp/ccAGT20F.s 			page 4


DEFINED SYMBOLS
   asm_src/asmfunc.S:16     .text:0000000000000000 io_hlt
   asm_src/asmfunc.S:21     .text:0000000000000002 io_cli
   asm_src/asmfunc.S:26     .text:0000000000000004 io_sti
   asm_src/asmfunc.S:31     .text:0000000000000006 io_stihlt
   asm_src/asmfunc.S:37     .text:0000000000000009 io_in8
   asm_src/asmfunc.S:44     .text:0000000000000014 io_in16
   asm_src/asmfunc.S:51     .text:0000000000000020 io_in32
   asm_src/asmfunc.S:57     .text:0000000000000026 io_out8
   asm_src/asmfunc.S:78     .text:0000000000000045 io_load_eflags
   asm_src/asmfunc.S:84     .text:0000000000000048 io_store_eflags
   asm_src/asmfunc.S:91     .text:000000000000004f load_gdtr
   asm_src/asmfunc.S:98     .text:000000000000005f load_idtr
   asm_src/asmfunc.S:105    .text:000000000000006f asm_inthandler21
   asm_src/asmfunc.S:122    .text:0000000000000086 asm_inthandler27
   asm_src/asmfunc.S:139    .text:000000000000009d asm_inthandler2c
   asm_src/asmfunc.S:64     .text:0000000000000030 in_out16
   asm_src/asmfunc.S:71     .text:000000000000003b in_out32

UNDEFINED SYMBOLS
io_out16
io_out32
inthandler21
inthandler27
inthandler2c
